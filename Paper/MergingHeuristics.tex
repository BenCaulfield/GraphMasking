\section{Merging Heuristics}
\indent Unfortunately, although the label-swapping algorithm yields perfectly satisfying graphs, it often doesn't sufficiently disguise a given graph.  In this section, we present a heuristic, called \emph{adjacency group merges} (or simply \emph{merges}) that further randomizes a given graph, but is not guaranteed to maintain the same k-neighborhood. There are two versions of this heuristic that we developed, \emph{deterministic merges} and \emph{non-deterministic merges}.

\begin{dfn}
\noindent A \emph{merge} or \emph{merging} of a graph's adjacency groups combines similar adjacency groups into larger groups containing the union of their nodes based on their \emph{difference}.
\end{dfn}

\begin{dfn}
The difference between adjacency groups $A$ and $B$ is the size of the symmetric difference of $N_k(v)$ and $N_k(u)$, for $v \in A$ and $u \in B$. 
\end{dfn}

\subsection{Deterministic Merging}

\begin{dfn}
A \emph{deterministic adjacency group merge} maps every pair of nodes to  the differencence value between their adjacency groups and merges adjacency groups of the first n that have not been involved in a previous merge.
\end{dfn}

\begin{figure}[htb]
	\begin{algorithmic}
		\renewcommand{\algorithmicrequire}{\textbf{Input:}}
		\renewcommand{\algorithmicensure}{\textbf{Output:}}
		\Require {graph $G=(V,E)$, k-neighborhoods $K= \{k_{1}, k_{2}, ...\}$, adjecency groups $A=\{a_{1}, a_{2}, ...\}$, limit L}
		\Ensure {adjecency groups $A'$}
		\ForAll {$v \in V$}
			\ForAll {$w \in W$ where $v \neq w$}
				\State {find $Diff(A(v),A(w))$}
			\EndFor
		\EndFor
		\ForAll {$(v,w,d) \in V \times V \times {\mathbb Z}$ sorted by $d = Diff(A(v),A(w))$ where $v \neq w$}
			\State {$n = 0$}
		\EndFor
		\If {$A(v)$ has not been merged and $A(w)$ has not been merged}
			\State {$merge(A(v),A(w))$}
			\State {mark $A(v)$ as merged}
			\State {mark $A(w)$ as merged}
			\State {$n++$}
			\If {$n = L$}
				\State {break}
			\EndIf
		\EndIf
	\end{algorithmic}
	\caption{Pseudocode for the Deterministic Merging Heuristic Algorithm.}
	\label{fig:deterministic-merging}
\end{figure}

\subsection{Non-Deterministic Merging}

\begin{dfn}
A \emph{non-deterministic adjacency group merge} merges all of the pairs of randomly selected adjacency groups that have not been involved in a previous merge and have a \emph{difference} value less than or equal to a prescribed cutoff value.
\end{dfn}

\begin{figure}[htb]
	\begin{algorithmic}
		\renewcommand{\algorithmicrequire}{\textbf{Input:}}
		\renewcommand{\algorithmicensure}{\textbf{Output:}}
		\Require {Integer $max\_diff$, Graph $G = (V, E)$, Adjacency Groups $A$}
		\State {$current\_diff = 0$}
		\State {$total\_changes = 0$}
		\ForAll {$u \in V$}
			\If {$u$ has been altered}
				\State {continue}
			\EndIf
			\State {Integer $min\_diff = max\_diff + 1$}
			\State {Integer $min\_pos = -1$}
			\State {Integer $min\_diff2 = max\_diff + 1$}
			\State {Integer $min\_pos2 = -1$}
			\ForAll {$v \in V$}
				\If {$v < u$ or $v$ has been altered}
					\State {continue}
				\EndIf
				\If {$diff(u,v) < min\_diff$ and $diff(u,v) \neq 0$ and $u$ does not share an adjacency group with $v$}
					\State {$min\_diff = diff(u,v)$}
					\State {$min\_pos = v$}
				\EndIf
			\EndFor
			\If {$min\_pos \neq -1$}
				\State {$total\_changes++$}
				\State {mark $u$ as altered}
				\State {mark $min\_pos$ as altered}
				\State {$current\_diff += min\_diff$}
				\State {merge the two adjacency groups belinging to $u$ and $min\_pos$}
			\EndIf
		\EndFor		
	\end{algorithmic}
	\caption{Pseudocode for the Non-Deterministic Merging Heuristic Algorithm.}
	\label{fig:non-deterministic-merging}
\end{figure}

\begin{figure}[ht]
  \centering
  \includegraphics[scale=0.8 ]{s40_k_2_det.png}
  \caption{The results from the label-swapping algorithm when run 20 times on the blog data when k=2. Adjacency groups differing by 5 or less were merged.}
  \label{fig:s40-k=2-merge}
\end{figure}

\begin{figure}[ht]
  \centering
  \includegraphics[scale=0.8]{s40_k_3_det.png}
  \caption{The results from the label-swapping algorithm when run 20 times on the blog data when k=3. Adjacency groups differing by 5 or less were merged.}
  \label{fig:s40-k=3-merge}
\end{figure}

\begin{figure}[ht]
  \centering
  \includegraphics[scale=0.8]{s40_k_4_det.png}
  \caption{The results from the label-swapping algorithm when run 20 times on the blog data when k=4. Adjacency groups differing by 5 or less were merged.}
  \label{fig:s40-k=3-merge}
\end{figure}